
# Hotel Booking API

–ü—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è **–Ω–æ–º–µ—Ä–∞–º–∏ –æ—Ç–µ–ª–µ–π** –∏ **–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏**.
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ **Django + DRF**, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **PostgreSQL** –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ **Docker Compose**.
–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –∫–∞–∫ —É—á–µ–±–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ, –Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∞ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–¥–∞–∫—à–Ω-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é.

---

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### Rooms (–ù–æ–º–µ—Ä–∞ –æ—Ç–µ–ª—è)

* **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞**: POST `/rooms/`
  –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `description` (—Ç–µ–∫—Å—Ç) –∏ `price_per_night` (Decimal).
  –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID –Ω–æ–º–µ—Ä–∞.
* **–°–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤**: GET `/rooms/list/`
  –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø–æ —Ü–µ–Ω–µ –∏ –¥–∞—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (`?ordering=price_per_night` / `-price_per_night`, `created_at`).
* **–£–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞**: DELETE `/rooms/{id}/`
  –£–¥–∞–ª—è–µ—Ç –Ω–æ–º–µ—Ä –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –±—Ä–æ–Ω–∏.

### Bookings (–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)

* **–°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏**: POST `/bookings/`
  –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `room`, `date_start`, `date_end`.
  –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –Ω–æ–º–µ—Ä–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–∞–∫ —É–ª—É—á—à–µ–Ω–∏–µ).
* **–°–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–µ–π –Ω–æ–º–µ—Ä–∞**: GET `/bookings/list/?room_id={id}`
  –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ –Ω–∞—á–∞–ª–∞.
* **–£–¥–∞–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏**: DELETE `/bookings/{id}/`.

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

* Python 3.11
* Django 5 + Django REST Framework
* PostgreSQL 16
* Poetry (–º–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
* Docker, Docker Compose
* Pytest (—é–Ω–∏—Ç- –∏ API-—Ç–µ—Å—Ç—ã)
* Ruff (–ª–∏–Ω—Ç–µ—Ä –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä)

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
git clone https://github.com/<your-username>/hotel-api.git
cd hotel-api
```

### 2. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
docker compose up --build
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞
üëâ [http://localhost:9000](http://localhost:9000)

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å health-—á–µ–∫:

```bash
curl http://localhost:9000/health
# {"service": "hotel-booking-api", "status": "healthy"}
```

### 3. –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ (—á–µ—Ä–µ–∑ Poetry)

–¢—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π **PostgreSQL**.

```bash
poetry install
poetry run python manage.py migrate
poetry run python manage.py runserver 0.0.0.0:9000
```

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
POSTGRES_DB=hotel_db
POSTGRES_USER=hotel_user
POSTGRES_PASSWORD=hotel_pass
DB_HOST=db
DB_PORT=5432
DJANGO_SECRET_KEY=unsafe-dev-key
DEBUG=1
ALLOWED_HOSTS=*
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
docker compose run --rm web pytest -v
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

```bash
docker compose run --rm web pytest --cov=hotels
```

### –õ–∏–Ω—Ç–µ—Ä

```bash
docker compose run --rm web ruff check .
```

–ê–≤—Ç–æ-—Ñ–∏–∫—Å:

```bash
docker compose run --rm web ruff check . --fix
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
hotel-api/
‚îÇ‚îÄ‚îÄ config/              # Django config (settings, urls, wsgi)
‚îÇ‚îÄ‚îÄ hotels/              # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ models.py        # Room, Booking
‚îÇ   ‚îú‚îÄ‚îÄ views.py         # APIView / GenericAPIView
‚îÇ   ‚îú‚îÄ‚îÄ serializers.py   # DRF —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ urls.py          # —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ tests/           # —Ç–µ—Å—Ç—ã (unit, api, e2e)
‚îÇ‚îÄ‚îÄ docker-compose.yml   # Docker Compose
‚îÇ‚îÄ‚îÄ Dockerfile           # –æ–±—Ä–∞–∑ web-—Å–µ—Ä–≤–∏—Å–∞
‚îÇ‚îÄ‚îÄ pyproject.toml       # poetry –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ‚îÄ‚îÄ README.md            # –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ .gitignore
```

---

## –ü—Ä–∏–Ω—è—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è

* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω Django + DRF –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–≤–º–µ—Å—Ç–æ Go/PHP).
* –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤—ã–±—Ä–∞–Ω–∞ PostgreSQL.
* –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ Django (–≤–º–µ—Å—Ç–æ raw SQL).
* –î–æ–±–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã (unit, API, e2e).
* –ö–æ–¥—Å—Ç–∞–π–ª –∏ –ª–∏–Ω—Ç–µ—Ä: Ruff.
* –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞.

